<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ</title>
    <link rel="stylesheet" href="../../css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Ø£Ù†Ù…Ø§Ø· Ø¹Ø§Ù…Ø© */
        body {
            font-family: 'Arial', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        
        /* Ø§Ù„Ø­Ø§ÙˆÙŠØ© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
        .exam-container {
            max-width: 800px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0,0,0,0.1);
        }
        
        /* Ø±Ø£Ø³ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† */
        .exam-header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 2px solid #007bff;
        }
        
        .exam-header h1 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        
        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .stats {
            background: #e9f5ff;
            padding: 10px 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-weight: bold;
            text-align: center;
            border-right: 4px solid #007bff;
        }
        
        /* Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .question {
            margin-bottom: 25px;
            padding: 20px;
            border: 1px solid #eee;
            border-radius: 8px;
            background-color: #fafafa;
            transition: all 0.3s ease;
        }
        
        .question:hover {
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
        }
        
        .question h3 {
            color: #007bff;
            margin-top: 0;
            padding-bottom: 10px;
            border-bottom: 1px dashed #ddd;
        }
        
        /* Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ù‚ØµØ§Ø¦Ø¯ */
        .passage, .poem {
            background: #f9f9f9;
            padding: 20px;
            border-radius: 8px;
            margin: 15px 0;
            line-height: 1.8;
            font-style: italic;
            border-right: 4px solid #6c757d;
        }
        
        .poem {
            text-align: center;
            font-weight: bold;
            background: #fff9e6;
            border-right-color: #ffc107;
        }
        
        /* Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .options {
            margin: 20px 0;
        }
        
        .option {
            margin-bottom: 10px;
            padding: 12px 15px;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid #e0e0e0;
            background: white;
        }
        
        .option:hover {
            background-color: #e9f5ff;
            transform: translateX(-5px);
        }
        
        .option.selected {
            background-color: #d4edff;
            border-left: 4px solid #007bff;
        }
        
        .option.correct {
            background-color: #d4edda;
            border-left: 4px solid #28a745;
        }
        
        .option.incorrect {
            background-color: #f8d7da;
            border-left: 4px solid #dc3545;
        }
        
        /* Ø´Ø±Ø­ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
        .explanation {
            display: none;
            margin-top: 20px;
            padding: 15px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-right: 3px solid #6c757d;
        }
        
        /* Ø­Ù‚ÙˆÙ„ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        .fill-in-blank input {
            width: 100%;
            padding: 12px;
            margin: 15px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        .fill-in-blank input:focus {
            border-color: #007bff;
            outline: none;
            box-shadow: 0 0 0 3px rgba(0,123,255,0.1);
        }
        
        /* Ø§Ù„ØªÙ†Ù‚Ù„ Ø¨ÙŠÙ† Ø§Ù„Ø£Ø³Ø¦Ù„Ø© */
        .navigation {
            display: flex;
            justify-content: space-between;
            margin: 30px 0;
        }
        
        /* Ø§Ù„Ø£Ø²Ø±Ø§Ø± */
        .btn {
            padding: 12px 25px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        
        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }
        
        .btn-primary {
            background-color: #007bff;
            color: white;
        }
        
        .btn-primary:hover:not(:disabled) {
            background-color: #0069d9;
            transform: translateY(-2px);
        }
        
        .btn-secondary {
            background-color: #6c757d;
            color: white;
        }
        
        .btn-secondary:hover:not(:disabled) {
            background-color: #5a6268;
            transform: translateY(-2px);
        }
        
        .btn-success {
            background-color: #28a745;
            color: white;
        }
        
        .btn-success:hover:not(:disabled) {
            background-color: #218838;
            transform: translateY(-2px);
        }
        
        .btn-danger {
            background-color: #dc3545;
            color: white;
        }
        
        .btn-danger:hover:not(:disabled) {
            background-color: #c82333;
            transform: translateY(-2px);
        }
        
        .btn-warning {
            background-color: #ffc107;
            color: #212529;
        }
        
        .btn-warning:hover:not(:disabled) {
            background-color: #e0a800;
            transform: translateY(-2px);
        }
        
        .btn-info {
            background-color: #17a2b8;
            color: white;
        }
        
        .btn-info:hover:not(:disabled) {
            background-color: #138496;
            transform: translateY(-2px);
        }
        
        /* Ø§Ù„Ù†ØªØ§Ø¦Ø¬ */
        .results-container {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 8px;
        }
        
        .score {
            text-align: center;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            color: #007bff;
        }
        
        .feedback {
            text-align: center;
            font-size: 18px;
            margin: 15px 0;
            color: #28a745;
            font-weight: bold;
        }
        
        .result-item {
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 8px;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }
        
        .recommendations {
            background-color: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid #ffeaa7;
        }
        
        .correct-answer {
            color: #28a745;
            font-weight: bold;
        }
        
        /* Ø¹Ù†Ø§ØµØ± Ø§Ù„ØªØ­ÙƒÙ… */
        .controls {
            margin-top: 30px;
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        /* Ø§Ù„ØªÙƒÙŠÙ Ù…Ø¹ Ø§Ù„Ø´Ø§Ø´Ø§Øª Ø§Ù„ØµØºÙŠØ±Ø© */
        @media (max-width: 768px) {
            .exam-container {
                padding: 15px;
            }
            
            .navigation {
                flex-direction: column;
                gap: 10px;
            }
            
            .btn {
                width: 100%;
                margin-bottom: 5px;
            }
            
            .controls {
                flex-direction: column;
            }
            
            .question {
                padding: 15px;
            }
            
            .passage, .poem {
                padding: 15px;
            }
        }
    </style></head>
<body>
    <div class="exam-container">
        <div class="exam-header">
            <h1 id="exam-title">Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ (Unit 5) - Ø§Ù„ØªØ±Ù… Ø§Ù„Ø£ÙˆÙ„</h1>
        </div>
        
        <div class="stats">Ø§Ù„Ø³Ø¤Ø§Ù„ <span id="current-question">1</span> Ù…Ù† <span id="total-questions">30</span></div>
        
        <div id="questions-container"></div>
        
        <div class="navigation">
            <button id="prev-btn" class="btn btn-secondary" disabled>Ø§Ù„Ø³Ø§Ø¨Ù‚</button>
            <button id="next-btn" class="btn btn-primary">Ø§Ù„ØªØ§Ù„ÙŠ</button>
        </div>
        
        <div class="controls">
            <button id="restart-btn" class="btn btn-warning">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¨Ø¯Ø¡</button>
            <button id="print-btn" class="btn btn-info">Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            <button id="share-btn" class="btn btn-success">Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬</button>
            <button id="back-btn" class="btn btn-danger">Ø§Ù„Ø¹ÙˆØ¯Ø© Ù„Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª</button>
        </div>
        
        <div class="results-container" id="results-container">
            <h2>Ø§Ù„Ù†ØªÙŠØ¬Ø©</h2>
            <div id="score"></div>
            <div id="detailed-results"></div>
        </div>
    </div>

    <audio id="correctSound" src="../../../assets/audio/correct.mp3" preload="auto"></audio>
    <audio id="incorrectSound" src="../../../assets/audio/incorrect.mp3" preload="auto"></audio>


   <script>
    // Ø£ØµÙˆØ§Øª
    const correctSound = document.getElementById('correctSound');
    const incorrectSound = document.getElementById('incorrectSound');

    // Ù…Ø¹Ø±Ù Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
    const examId = "arabic-grade1-term1";

    // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø£Ø³Ø¦Ù„Ø© (ÙƒÙ…Ø§ Ø£Ø±Ø³Ù„ØªÙ‡Ø§)
    const examData = {
        title: "Ø§Ø®ØªØ¨Ø§Ø± Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ© - Ø§Ù„ØµÙ Ø§Ù„Ø«Ø§Ù†ÙŠ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯ÙŠ (Unit 5) - Ø§Ù„ØªØ±Ù… Ø§Ù„Ø£ÙˆÙ„",
        questions: [
            {
        "id": 1,
        "type": "multiple-choice",
        "text": "What kind of person are the writer and her sister?",
        "options": [
            { "id": 1, "text": "polite", "correct": false },
            { "id": 2, "text": "rude", "correct": false },
            { "id": 3, "text": "ugly", "correct": false },
            { "id": 4, "text": "messy", "correct": true }
        ],
        "explanation": "Ø§Ù„Ø³Ø¤Ø§Ù„ ÙŠØ¯ÙˆØ± Ø­ÙˆÙ„ Ø¹Ø§Ø¯Ø© Ø³ÙˆØ¡ Ø§Ù„ØªÙ†Ø¸ÙŠÙ…ØŒ Ùˆ'messy' = ÙÙˆØ¶ÙˆÙŠØŒ ÙˆÙ‡Ùˆ Ù…Ø§ ÙŠØªÙ†Ø§Ø³Ø¨ Ù…Ø¹ Ø§Ù„Ø³ÙŠØ§Ù‚."
    },
    {
        "id": 2,
        "type": "multiple-choice",
        "text": "What do they usually do before sleeping?",
        "options": [
            { "id": 1, "text": "clap", "correct": false },
            { "id": 2, "text": "sing", "correct": false },
            { "id": 3, "text": "dance", "correct": false },
            { "id": 4, "text": "tidy up", "correct": true }
        ],
        "explanation": "Ù…Ù† Ø§Ù„Ù…Ù†Ø·Ù‚ÙŠ Ø£Ù† ÙŠÙƒÙˆÙ† 'tidy up' (ØªØ±ØªÙŠØ¨) Ù‡Ùˆ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© Ù‚Ø¨Ù„ Ø§Ù„Ù†ÙˆÙ…ØŒ Ùˆ'vote up' Ø®Ø·Ø£ Ø¥Ù…Ù„Ø§Ø¦ÙŠ Ù…Ø­ØªÙ…Ù„."
    },
    {
        "id": 3,
        "type": "multiple-choice",
        "text": "How many times do they take out rubbish?",
        "options": [
            { "id": 1, "text": "once", "correct": false },
            { "id": 2, "text": "twice", "correct": true },
            { "id": 3, "text": "three times", "correct": false },
            { "id": 4, "text": "four times", "correct": false }
        ],
        "explanation": "Ø§Ù„Ø£ÙƒØ«Ø± Ù…Ù†Ø·Ù‚ÙŠØ© ÙÙŠ Ø§Ù„Ø­ÙŠØ§Ø© Ø§Ù„ÙŠÙˆÙ…ÙŠØ©."
    },
    {
        "id": 4,
        "type": "multiple-choice",
        "text": "Where do they take out rubbish in?",
        "options": [
            { "id": 1, "text": "baskets", "correct": false },
            { "id": 2, "text": "bins", "correct": true },
            { "id": 3, "text": "bogs", "correct": false },
            { "id": 4, "text": "pols", "correct": false }
        ],
        "explanation": "'rubbish bins' = ØµÙ†Ø§Ø¯ÙŠÙ‚ Ø§Ù„Ù‚Ù…Ø§Ù…Ø©."
    },
    {
        "id": 5,
        "type": "fill-in-blank",
        "text": "Nasser: Do you have to study this evening, Omar?\nOmar: (1)....",
        "correctAnswer": "Yes, I do",
        "explanation": "Ø±Ø¯ Ø¨Ø§Ù„Ø¥ÙŠØ¬Ø§Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„"
    },
    {
        "id": 6,
        "type": "fill-in-blank",
        "text": "Nasser: (2)....\nOmar: Geography! I have a geography test tomorrow.",
        "correctAnswer": "What for?",
        "explanation": "Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø³Ø¨Ø¨ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©"
    },
    {
        "id": 7,
        "type": "fill-in-blank",
        "text": "Nasser: Does your brother have to study, too?\nOmar: (3)....",
        "correctAnswer": "No, he doesn't",
        "explanation": "Ø±Ø¯ Ø¨Ø§Ù„Ù†ÙÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„"
    },
    {
        "id": 8,
        "type": "fill-in-blank",
        "text": "Nasser: What does he have to do then?\nOmar: (4)....",
        "correctAnswer": "He has to tidy his room",
        "explanation": "Ø´Ø±Ø­ Ù…Ø§ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø® ÙØ¹Ù„Ù‡"
    },
    {
        "id": 9,
        "type": "fill-in-blank",
        "text": "Nasser: Where do we have to go for the next lesson?\nOmar: (5)....",
        "correctAnswer": "We have to go to the science lab",
        "explanation": "ØªØ­Ø¯ÙŠØ¯ Ù…ÙƒØ§Ù† Ø§Ù„Ø­ØµØ© Ø§Ù„Ù‚Ø§Ø¯Ù…Ø©"
    },
    {
        "id": 10,
        "type": "passage",
        "content": "Mrs. Saleh had two children. Samy was seven years old, and his sister Nora was four. Samy went to school, but Nora did not. When Samy was at home, he often played with Nora while their mother was cooking or washing or cleaning. Mrs. Saleh was usually free to do her work quietly because Samy was very nice to his small sister.\nOne Friday morning, the two children were playing in the garden while their mother was cooking lunch. They were quite happy until Nora suddenly began to cry and ran into the kitchen to her mother. Mrs. Saleh stopped cooking and said, 'Why are you crying, Nora?' 'Samy broke my toy,' Nora answered, crying more loudly. 'How did he break it?' her mother asked. Nora stopped crying, but did not answer for a few seconds. Then she said, 'I hit him on the head with it.'"
    },
    {
        "id": 11,
        "type": "fill-in-blank",
        "text": "Give a suitable title to the passage.",
        "correctAnswer": "A Broken Toy Ø£Ùˆ Samy and Nora",
        "explanation": "ÙŠØ¹ÙƒØ³ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ù‚ØµØ©"
    },
    {
        "id": 12,
        "type": "fill-in-blank",
        "text": "Why was Mrs. Saleh usually free to do her work quietly?",
        "correctAnswer": "Because Samy played nicely with his sister and took care of her",
        "explanation": "Ù‡Ø°Ø§ Ù…Ø§ Ø¬Ø¹Ù„Ù‡Ø§ ØªØ´Ø¹Ø± Ø¨Ø§Ù„Ø±Ø§Ø­Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¹Ù…Ù„"
    },
    {
        "id": 13,
        "type": "fill-in-blank",
        "text": "How old was Samy's sister?",
        "correctAnswer": "She was four years old",
        "explanation": "ÙˆØ±Ø¯ ÙÙŠ Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„Ø«Ø§Ù†ÙŠØ©"
    },
    {
        "id": 14,
        "type": "multiple-choice",
        "text": "The underlined word 'loudly' means:",
        "options": [
            { "id": 1, "text": "calmly", "correct": false },
            { "id": 2, "text": "noisily", "correct": true },
            { "id": 3, "text": "kindly", "correct": false },
            { "id": 4, "text": "quietly", "correct": false }
        ],
        "explanation": "'loudly' = Ø¨ØµÙˆØª Ø¹Ø§Ù„Ù = noisily"
    },
    {
        "id": 15,
        "type": "multiple-choice",
        "text": "When Nora cried, her mother was in the:",
        "options": [
            { "id": 1, "text": "garden", "correct": false },
            { "id": 2, "text": "bedroom", "correct": false },
            { "id": 3, "text": "kitchen", "correct": true },
            { "id": 4, "text": "school", "correct": false }
        ],
        "explanation": "'ran into the kitchen to her mother'"
    },
    {
        "id": 16,
        "type": "multiple-choice",
        "text": "The toy was:",
        "options": [
            { "id": 1, "text": "repaired", "correct": false },
            { "id": 2, "text": "cleaned", "correct": false },
            { "id": 3, "text": "broken", "correct": true },
            { "id": 4, "text": "old", "correct": false }
        ],
        "explanation": "'Samy broke my toy'"
    },
    {
        "id": 17,
        "type": "multiple-choice",
        "text": "Hala is a ___ person. She doesn't put anything in its right place.",
        "options": [
            { "id": 1, "text": "tidy", "correct": false },
            { "id": 2, "text": "messy", "correct": true },
            { "id": 3, "text": "lucky", "correct": false },
            { "id": 4, "text": "full", "correct": false }
        ],
        "explanation": "Ù„Ø§ ØªØ¶Ø¹ Ø§Ù„Ø£Ø´ÙŠØ§Ø¡ ÙÙŠ Ø£Ù…Ø§ÙƒÙ†Ù‡Ø§ â†’ ÙÙˆØ¶ÙˆÙŠØ©"
    },
    {
        "id": 18,
        "type": "multiple-choice",
        "text": "They should try to ___ friends with her.",
        "options": [
            { "id": 1, "text": "take", "correct": false },
            { "id": 2, "text": "make", "correct": true },
            { "id": 3, "text": "talk", "correct": false },
            { "id": 4, "text": "give", "correct": false }
        ],
        "explanation": "'make friends' = ÙŠØµØ¨Ø­ÙˆØ§ Ø£ØµØ¯Ù‚Ø§Ø¡"
    },
    {
        "id": 19,
        "type": "multiple-choice",
        "text": "Nader helps his brother ___ his school bag ready.",
        "options": [
            { "id": 1, "text": "leave", "correct": false },
            { "id": 2, "text": "get", "correct": true },
            { "id": 3, "text": "stay", "correct": false },
            { "id": 4, "text": "spend", "correct": false }
        ],
        "explanation": "'get ready' = ÙŠØ³ØªØ¹Ø¯"
    },
    {
        "id": 20,
        "type": "multiple-choice",
        "text": "Someone should run after Tarek and give the bag ___.",
        "options": [
            { "id": 1, "text": "in", "correct": false },
            { "id": 2, "text": "out", "correct": false },
            { "id": 3, "text": "back", "correct": true },
            { "id": 4, "text": "up", "correct": false }
        ],
        "explanation": "'give back' = ÙŠØ¹ÙŠØ¯"
    },
    {
        "id": 21,
        "type": "multiple-choice",
        "text": "The footballer was given a ___ test to check his health.",
        "options": [
            { "id": 1, "text": "messy", "correct": false },
            { "id": 2, "text": "lucky", "correct": false },
            { "id": 3, "text": "medical", "correct": true },
            { "id": 4, "text": "random", "correct": false }
        ],
        "explanation": "'medical test' = ÙØ­Øµ Ø·Ø¨ÙŠ"
    },
    {
        "id": 22,
        "type": "multiple-choice",
        "text": "The book is ___. You should read it.",
        "options": [
            { "id": 1, "text": "fantastic", "correct": true },
            { "id": 2, "text": "ugly", "correct": false },
            { "id": 3, "text": "being", "correct": false },
            { "id": 4, "text": "boring", "correct": false }
        ],
        "explanation": "'You should read it' â†’ ÙŠØ¹Ù†ÙŠ Ø§Ù„ÙƒØªØ§Ø¨ Ø¬ÙŠØ¯"
    },
    {
        "id": 23,
        "type": "multiple-choice",
        "text": "Adam knew everyone in the village, so he was surprised when a ___ walked into his shop.",
        "options": [
            { "id": 1, "text": "neighbour", "correct": false },
            { "id": 2, "text": "relative", "correct": false },
            { "id": 3, "text": "stranger", "correct": true },
            { "id": 4, "text": "officer", "correct": false }
        ],
        "explanation": "Ø¥Ø°Ø§ ÙƒØ§Ù† ÙŠØ¹Ø±Ù Ø§Ù„Ø¬Ù…ÙŠØ¹ØŒ ÙØ§Ù„ØºØ±ÙŠØ¨ Ù‡Ùˆ Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø©"
    },
    {
        "id": 24,
        "type": "multiple-choice",
        "text": "I remembered the man ___ I met at the party.",
        "options": [
            { "id": 1, "text": "where", "correct": false },
            { "id": 2, "text": "which", "correct": false },
            { "id": 3, "text": "who", "correct": true },
            { "id": 4, "text": "when", "correct": false }
        ],
        "explanation": "'who' ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ø£Ø´Ø®Ø§Øµ"
    },
    {
        "id": 25,
        "type": "multiple-choice",
        "text": "You ___ take a bus, I'll drive you to school.",
        "options": [
            { "id": 1, "text": "don't have to", "correct": true },
            { "id": 2, "text": "must", "correct": false },
            { "id": 3, "text": "should", "correct": false },
            { "id": 4, "text": "can", "correct": false }
        ],
        "explanation": "Ù„ÙŠØ³ Ø¹Ù„ÙŠÙƒ Ø£Ù† ØªØ£Ø®Ø° Ø£ØªÙˆØ¨ÙŠØ³ØŒ Ù„Ø£Ù†Ù†ÙŠ Ø³Ø£ÙˆØµÙ„Ùƒ"
    },
    {
        "id": 26,
        "type": "multiple-choice",
        "text": "I ___ do my homework. My teacher always checks.",
        "options": [
            { "id": 1, "text": "should", "correct": false },
            { "id": 2, "text": "has to", "correct": false },
            { "id": 3, "text": "have to", "correct": true },
            { "id": 4, "text": "must to", "correct": false }
        ],
        "explanation": "'have to' = Ù…Ø¶Ø·Ø± Ù„ÙØ¹Ù„ Ø´ÙŠØ¡ (Ø¨Ø³Ø¨Ø¨ Ø§Ù„ØªØ­ÙÙŠØ² Ø§Ù„Ø®Ø§Ø±Ø¬ÙŠ)"
    },
    {
        "id": 27,
        "type": "fill-in-blank",
        "text": "Does you have to look after your baby sister at the weekend?",
        "correctAnswer": "Do you have to look after your baby sister at the weekend?",
        "explanation": "Ø§Ù„ØªØµØ­ÙŠØ­: 'Do' Ù…Ø¹ 'you'ØŒ ÙˆÙ„ÙŠØ³ 'Does'"
    },
    {
        "id": 28,
        "type": "fill-in-blank",
        "text": "You ___ take out the rubbish, I did it this morning. (have to)",
        "correctAnswer": "don't have to",
        "explanation": "'I did it' â†’ Ù„Ø§ Ø¯Ø§Ø¹ÙŠ Ù„ÙØ¹Ù„Ù‡Ø§ Ø§Ù„Ø¢Ù†"
    },
    {
        "id": 29,
        "type": "fill-in-blank",
        "text": "The tourists ___ visit Egypt always love the ancient temples. (who)",
        "correctAnswer": "who visit Egypt",
        "explanation": "Ø§Ù„Ø¬Ù…Ù„Ø© Ø§Ù„ÙƒØ§Ù…Ù„Ø©: 'The tourists who visit Egypt always love the ancient temples.'"
    },
    {
        "id": 30,
        "type": "fill-in-blank",
        "text": "This is the museum ___ I visited last year. (who)",
        "correctAnswer": "that / which",
        "explanation": "Ø§Ù„Ø¬Ù…Ù„Ø©: 'This is the museum that I visited last year.' (Ù„Ø£Ù† 'who' Ù„Ø§ ØªÙØ³ØªØ®Ø¯Ù… Ù„Ù„Ø£Ø´ÙŠØ§Ø¡)"
    }
        ]
    };

   // Ù…ØªØºÙŠØ±Ø§Øª
    let currentQuestionIndex = 0;
    let userAnswers = {};
    let answered = {};

    // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø­ÙÙˆØ¸Ø©
    function loadSavedData() {
        const saved = localStorage.getItem(`exam_${examId}`);
        if (saved) {
            const data = JSON.parse(saved);
            userAnswers = data.answers || {};
            currentQuestionIndex = data.currentQuestionIndex || 0;
            return true;
        }
        return false;
    }

    // Ø­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
    function saveData() {
        const data = {
            answers: userAnswers,
            currentQuestionIndex: currentQuestionIndex,
            timestamp: new Date().toISOString()
        };
        localStorage.setItem(`exam_${examId}`, JSON.stringify(data));
    }

    // Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Ø¨Ø§Ø³ØªØ«Ù†Ø§Ø¡ Ø§Ù„Ù†ØµÙˆØµ ÙˆØ§Ù„Ø´Ø¹Ø±)
    function getQuestionNumber(index) {
        let realCount = 0;
        for (let i = 0; i <= index; i++) {
            if (examData.questions[i].type !== "passage" && examData.questions[i].type !== "poem") {
                realCount++;
            }
        }
        return realCount;
    }

    // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
    function updateNextButton() {
        const nextBtn = document.getElementById('next-btn');
        const currentQuestion = examData.questions[currentQuestionIndex];
        
        // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù†ØµÙ‹Ø§ Ø£Ùˆ Ø´Ø¹Ø±Ù‹Ø§ØŒ ÙØ¹Ù‘Ù„ Ø§Ù„Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø©
        if (currentQuestion.type === "passage" || currentQuestion.type === "poem") {
            nextBtn.disabled = false;
            return;
        }
        
        // ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù‚Ø¯ ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„ÙŠÙ‡
        nextBtn.disabled = !answered[currentQuestionIndex];
    }

    // ØªØ­Ø¯ÙŠØ¯ Ø®ÙŠØ§Ø± ÙÙŠ Ø³Ø¤Ø§Ù„ Ù…ØªØ¹Ø¯Ø¯ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    function selectOption(element, questionId, optionId, isCorrect) {
        // Ù…Ù†Ø¹ Ø§Ù„ØªØ­Ø¯ÙŠØ¯ Ø¥Ø°Ø§ ÙƒØ§Ù†Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ù…Ø¹Ø±ÙˆØ¶Ø© Ø¨Ø§Ù„ÙØ¹Ù„
        if (userAnswers[questionId]) return;
        
        // Ø¥Ù„ØºØ§Ø¡ ØªØ­Ø¯ÙŠØ¯ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª Ø§Ù„Ø£Ø®Ø±Ù‰
        const options = document.querySelectorAll(`.option[data-question="${questionId}"]`);
        options.forEach(opt => opt.classList.remove('selected'));
        
        // ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ø®ÙŠØ§Ø± Ø§Ù„Ø­Ø§Ù„ÙŠ
        element.classList.add('selected');
        
        // Ø­ÙØ¸ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        userAnswers[questionId] = {
            selected: optionId,
            correct: isCorrect
        };
        
        // ØªØ´ØºÙŠÙ„ Ø§Ù„ØµÙˆØª Ø§Ù„Ù…Ù†Ø§Ø³Ø¨
        if (isCorrect) {
            correctSound.play();
        } else {
            incorrectSound.play();
        }
        
        // Ø¹Ø±Ø¶ Ø§Ù„ØªÙØ³ÙŠØ±
        const explanationEl = document.getElementById(`explanation-${questionId}`);
        if (explanationEl) {
            explanationEl.style.display = 'block';
        }
        
        // ØªÙ…ÙŠÙŠØ² Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø§Ù„ØµØ­ÙŠØ­Ø© ÙˆØ§Ù„Ø®Ø§Ø·Ø¦Ø©
        options.forEach(opt => {
            const optCorrect = opt.getAttribute('data-correct') === 'true';
            if (optCorrect) {
                opt.classList.add('correct');
            } else if (parseInt(opt.getAttribute('data-option')) === optionId && !isCorrect) {
                opt.classList.add('incorrect');
            }
        });
        
        // ØªÙ…ÙƒÙŠÙ† Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ
        answered[currentQuestionIndex] = true;
        updateNextButton();
        saveData();
    }

    // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© ÙÙŠ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠØ©
    function onFillInput(questionId) {
        const input = document.getElementById(`fill-${questionId}`);
        userAnswers[questionId] = {
            answer: input.value
        };
        
        // ØªÙ…ÙƒÙŠÙ† Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ø¥Ø¯Ø®Ø§Ù„
        if (input.value.trim() !== '') {
            answered[currentQuestionIndex] = true;
        } else {
            answered[currentQuestionIndex] = false;
        }
        
        updateNextButton();
        saveData();
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„ØªØ§Ù„ÙŠ
    function nextQuestion() {
        const currentId = examData.questions[currentQuestionIndex].id;
        document.getElementById(`question-${currentId}`).style.display = 'none';
        
        if (currentQuestionIndex < examData.questions.length - 1) {
            currentQuestionIndex++;
            const nextId = examData.questions[currentQuestionIndex].id;
            document.getElementById(`question-${nextId}`).style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
            document.getElementById('current-question').textContent = getQuestionNumber(currentQuestionIndex);
            
            // ØªÙ…ÙƒÙŠÙ† Ø£Ùˆ ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            
            // Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ ØªØ§Ù„ÙŠÙ‹Ø§ Ù†ØµÙ‹Ø§ Ø£Ùˆ Ø´Ø¹Ø±Ù‹Ø§ØŒ ÙØ¹Ù‘Ù„ Ø§Ù„Ø²Ø± Ù…Ø¨Ø§Ø´Ø±Ø©
            const nextQ = examData.questions[currentQuestionIndex];
            if (nextQ.type === "passage" || nextQ.type === "poem") {
                answered[currentQuestionIndex] = true;
                document.getElementById('next-btn').disabled = false;
            } else {
                updateNextButton();
            }
            
            saveData();
        } else {
            showResults();
        }
    }

    // Ø§Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø³Ø§Ø¨Ù‚
    function prevQuestion() {
        const currentId = examData.questions[currentQuestionIndex].id;
        document.getElementById(`question-${currentId}`).style.display = 'none';
        
        if (currentQuestionIndex > 0) {
            currentQuestionIndex--;
            const prevId = examData.questions[currentQuestionIndex].id;
            document.getElementById(`question-${prevId}`).style.display = 'block';
            
            // ØªØ­Ø¯ÙŠØ« Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
            document.getElementById('current-question').textContent = getQuestionNumber(currentQuestionIndex);
            
            // ØªÙ…ÙƒÙŠÙ† Ø£Ùˆ ØªØ¹Ø·ÙŠÙ„ Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªÙ†Ù‚Ù„
            document.getElementById('prev-btn').disabled = currentQuestionIndex === 0;
            updateNextButton();
            
            saveData();
        }
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬
// Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ - Ø¨Ø¯ÙˆÙ† Ø­Ø³Ø§Ø¨ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠØ© ÙÙŠ Ø§Ù„Ø¯Ø±Ø¬Ø©
function showResults() {
    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†ØªÙŠØ¬Ø©: ÙÙ‚Ø· Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª
    let correctCount = 0;
    let totalQuestions = 0;

    examData.questions.forEach(q => {
        if (q.type === "multiple-choice") {
            totalQuestions++;
            if (userAnswers[q.id] && userAnswers[q.id].correct) {
                correctCount++;
            }
        }
    });

    // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ© Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø®ÙŠØ§Ø±Ø§Øª ÙÙ‚Ø·
    const score = totalQuestions > 0 ? Math.round((correctCount / totalQuestions) * 100) : 0;

    // ÙƒÙ„Ù…Ø§Øª ØªØ´Ø¬ÙŠØ¹ÙŠØ©
    let feedback = "";
    if (score >= 90) feedback = "Ù…Ù…ØªØ§Ø²! Ø£Ø­Ø³Ù†ØªØŒ Ø§Ø³ØªÙ…Ø± Ø¹Ù„Ù‰ Ù‡Ø°Ø§ Ø§Ù„Ù†Ø­Ùˆ ğŸŒŸ";
    else if (score >= 75) feedback = "Ø¬ÙŠØ¯ Ø¬Ø¯Ù‹Ø§! Ø£Ø¯Ø§Ø¡ Ø±Ø§Ø¦Ø¹ ğŸ‘";
    else if (score >= 60) feedback = "Ø¬ÙŠØ¯ØŒ ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ù„ØªØ­Ø³Ù† Ø£ÙƒØ«Ø± ğŸ’ª";
    else feedback = "Ù„Ø§ Ø¨Ø£Ø³ØŒ Ø±Ø§Ø¬Ø¹ Ø§Ù„Ø¯Ø±ÙˆØ³ ÙˆØ­Ø§ÙˆÙ„ Ù…Ø±Ø© Ø£Ø®Ø±Ù‰ â¤ï¸";

    // ØªÙˆØµÙŠØ§Øª
    let recommendations = "";
    if (score < 60) {
        recommendations = "Ù†Ù†ØµØ­Ùƒ Ø¨Ù…Ø±Ø§Ø¬Ø¹Ø© Ø§Ù„Ù‚ÙˆØ§Ø¹Ø¯ Ø§Ù„Ù†Ø­ÙˆÙŠØ© ÙˆØ§Ù„Ø¨Ù„Ø§ØºÙŠØ©ØŒ ÙˆØ­Ù„ Ø§Ù„Ù…Ø²ÙŠØ¯ Ù…Ù† Ø§Ù„Ø£Ø³Ø¦Ù„Ø©.";
    } else if (score < 80) {
        recommendations = "Ø£Ø¯Ø§Ø¡ Ø¬ÙŠØ¯ØŒ Ø±ÙƒÙ‘Ø² Ø¹Ù„Ù‰ Ø£Ù†ÙˆØ§Ø¹ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„ØªÙŠ Ø£Ø®Ø·Ø£Øª ÙÙŠÙ‡Ø§.";
    } else {
        recommendations = "Ø£Ø¯Ø§Ø¡ Ù…Ù…ØªØ§Ø²! Ø§Ø³ØªÙ…Ø± ÙÙŠ Ø§Ù„ØªÙ‚Ø¯Ù… ÙˆØ¬Ø±Ù‘Ø¨ Ø§Ù…ØªØ­Ø§Ù†Ø§Øª Ø£ØµØ¹Ø¨.";
    }

    // Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù†ØªØ§Ø¦Ø¬ Ø§Ù„ØªÙØµÙŠÙ„ÙŠØ©
    let detailedResults = '';
    let questionNumber = 0; // Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠ (Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØµØ­ÙŠØ­ ÙÙ‚Ø·)

    examData.questions.forEach(q => {
        const userAnswer = userAnswers[q.id];
        let answerText = 'Ù„Ù… ØªÙØ¬Ø¨';
        let statusText = 'Ù„Ù… ØªÙØ¬Ø¨ âŒ';

        // Ø¹Ø±Ø¶ Ø§Ù„ÙÙ‚Ø±Ø§Øª ÙˆØ§Ù„Ø´Ø¹Ø±
        if (q.type === "passage") {
            detailedResults += `
                <div class="result-item">
                    <h4>ğŸ“– ÙÙ‚Ø±Ø© Ù†ØµÙŠØ©</h4>
                    <div class="passage">${q.content.replace(/\n/g, '<br>')}</div>
                </div>
            `;
            return;
        }

        if (q.type === "poem") {
            detailedResults += `
                <div class="result-item">
                    <h4>ğŸ“œ Ù†Øµ Ø´Ø¹Ø±ÙŠ</h4>
                    <div class="poem">${q.content.replace(/\n/g, '<br>')}</div>
                </div>
            `;
            return;
        }

        // Ø²ÙŠØ§Ø¯Ø© Ø±Ù‚Ù… Ø§Ù„Ø³Ø¤Ø§Ù„ ÙÙ‚Ø· Ù„Ù„Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù‚Ø§Ø¨Ù„Ø© Ù„Ù„ØªØµØ­ÙŠØ­ (Ø§Ø®ØªÙŠØ§Ø± Ù…Ù† Ù…ØªØ¹Ø¯Ø¯)
        if (q.type === "multiple-choice") {
            questionNumber++;
        }

        // Ù…Ø¹Ø§Ù„Ø¬Ø© Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø©
        if (q.type === "multiple-choice") {
            const selectedOption = q.options.find(opt => opt.id == userAnswer?.selected);
            answerText = selectedOption ? selectedOption.text : 'Ù„Ù… ØªÙØ¬Ø¨';
            
            if (userAnswer && selectedOption?.correct) {
                statusText = 'Ø¥Ø¬Ø§Ø¨Ø© ØµØ­ÙŠØ­Ø© âœ…';
            } else if (userAnswer && !selectedOption?.correct) {
                statusText = 'Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âŒ';
            } else {
                statusText = 'Ù„Ù… ØªÙØ¬Ø¨ âŒ';
            }
        } 
        else if (q.type === "fill-in-blank") {
            // Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ù…Ù‚Ø§Ù„ÙŠ: ÙŠØ¸Ù‡Ø± Ù„ÙƒÙ† Ø¨Ø¯ÙˆÙ† ØªØ£Ø«ÙŠØ± Ø¹Ù„Ù‰ Ø§Ù„Ø¹Ø¯
            answerText = userAnswer?.answer?.trim() || 'Ù„Ù… ØªÙØ¬Ø¨';
            statusText = (userAnswer && answerText !== 'Ù„Ù… ØªÙØ¬Ø¨') ? 'ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© (ØªØ­Øª Ø§Ù„Ù…Ø±Ø§Ø¬Ø¹Ø©)' : 'Ù„Ù… ØªÙØ¬Ø¨ âŒ';
        }

        // Ø¹Ø±Ø¶ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¨Ø§Ù„Ø´ÙƒÙ„ Ø§Ù„Ù…Ø·Ù„ÙˆØ¨
        detailedResults += `
            <div class="result-item">
                ${q.type === "multiple-choice" ? `<p><strong>Ø§Ù„Ø³Ø¤Ø§Ù„ ${questionNumber}: ${q.text}</strong></p>` : `<p><strong>${q.text}</strong></p>`}
                <p><strong>Ø¥Ø¬Ø§Ø¨ØªÙƒ:</strong> ${answerText}</p>
                <p><strong>Ø§Ù„Ø­Ø§Ù„Ø©:</strong> ${statusText}</p>
                <p><strong>ğŸ“Œ Ø§Ù„ØªÙØ³ÙŠØ± Ø§Ù„ÙƒØ§Ù…Ù„:</strong> ${q.explanation}</p>
            </div>
        `;
    });

    // Ø¹Ø±Ø¶ Ø§Ù„Ù†ØªÙŠØ¬Ø© Ø§Ù„Ù†Ù‡Ø§Ø¦ÙŠØ©
    document.getElementById('score').innerHTML = `
        <div class="stats">Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø§Øª Ø§Ù„ØµØ­ÙŠØ­Ø©: ${correctCount} Ù…Ù† ${totalQuestions}</div>
        <div class="stats">Ø§Ù„Ù†Ø³Ø¨Ø© Ø§Ù„Ù…Ø¦ÙˆÙŠØ©: ${score}%</div>
        <div class="feedback">${feedback}</div>
        <div class="recommendations"><strong>ØªÙˆØµÙŠØ©:</strong> ${recommendations}</div>
    `;

    document.getElementById('detailed-results').innerHTML = detailedResults;

    // Ø¥Ø®ÙØ§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø© ÙˆØ¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    document.getElementById('questions-container').style.display = 'none';
    document.querySelector('.navigation').style.display = 'none';
    document.querySelector('.controls').style.display = 'flex';
    document.getElementById('results-container').style.display = 'block';
}
    // Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    function printResults() {
        window.print();
    }

    // Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬
    function shareResults() {
        if (navigator.share) {
            navigator.share({
                title: 'Ù†ØªÙŠØ¬Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†',
                text: `Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ${document.getElementById('score').textContent} ÙÙŠ Ø§Ù…ØªØ­Ø§Ù† Ø§Ù„Ù„ØºØ© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©`,
                url: window.location.href
            })
            .catch(error => {
                console.log('Error sharing:', error);
                alert('Ù„Ù… ÙŠØªÙ…ÙƒÙ† Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù† Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬. ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§.');
            });
        } else {
            alert('Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ù†ØªØ§Ø¦Ø¬ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…Ø© ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­. ÙŠÙ…ÙƒÙ†Ùƒ Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø¨Ø¯Ù„Ø§Ù‹ Ù…Ù† Ø°Ù„Ùƒ.');
        }
    }

    // Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
    function restartExam() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø¥Ø¹Ø§Ø¯Ø© Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†ØŸ Ø³ÙŠØªÙ… Ø­Ø°Ù Ø¬Ù…ÙŠØ¹ Ø¥Ø¬Ø§Ø¨Ø§ØªÙƒ Ø§Ù„Ø­Ø§Ù„ÙŠØ©.')) {
            userAnswers = {};
            answered = {};
            currentQuestionIndex = 0;
            localStorage.removeItem(`exam_${examId}`);
            location.reload();
        }
    }

    // Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§Øª
    function backToExams() {
        if (confirm('Ù‡Ù„ ØªØ±ÙŠØ¯ Ø§Ù„Ø¹ÙˆØ¯Ø© Ø¥Ù„Ù‰ Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†Ø§ØªØŸ Ø³ÙŠØªÙ… ÙÙ‚Ø¯Ø§Ù† ØªÙ‚Ø¯Ù…Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ Ø¥Ø°Ø§ Ù„Ù… ØªØ­ÙØ¸Ù‡.')) {
            window.location.href = '/questions.html'; // ØªØºÙŠÙŠØ± Ù‡Ø°Ø§ Ø§Ù„Ø±Ø§Ø¨Ø· Ø­Ø³Ø¨ Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©
        }
    }

    // ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ø§Ù…ØªØ­Ø§Ù†
    function initExam() {
        const container = document.getElementById('questions-container');
        const totalQuestions = examData.questions.filter(q => q.type !== "passage" && q.type !== "poem").length;
        document.getElementById('total-questions').textContent = totalQuestions;
        document.getElementById('current-question').textContent = getQuestionNumber(currentQuestionIndex);

        // ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø­Ø§Ù„Ø©
        const wasResumed = loadSavedData();

        // Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø£Ø³Ø¦Ù„Ø©
        examData.questions.forEach((q, index) => {
            const questionEl = document.createElement('div');
            questionEl.className = 'question';
            questionEl.id = `question-${q.id}`;
            questionEl.style.display = index === currentQuestionIndex ? 'block' : 'none';

            if (q.type === "passage") {
                questionEl.innerHTML = `<div class="passage">${q.content.replace(/\n/g, '<br>')}</div>`;
                // ØªÙ…ÙŠÙŠØ² Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ù†Øµ ÙƒØ£Ø³Ø¦Ù„Ø© ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„ÙŠÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
                answered[index] = false;
            } else if (q.type === "poem") {
                questionEl.innerHTML = `<div class="poem">${q.content.replace(/\n/g, '<br>')}</div>`;
                // ØªÙ…ÙŠÙŠØ² Ø£Ø³Ø¦Ù„Ø© Ø§Ù„Ø´Ø¹Ø± ÙƒØ£Ø³Ø¦Ù„Ø© ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„ÙŠÙ‡Ø§ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
                answered[index] = false;
            } else {
                let content = `<h3>Ø§Ù„Ø³Ø¤Ø§Ù„ ${getQuestionNumber(index)}: ${q.text}</h3>`;

                if (q.type === "multiple-choice") {
                    let optionsHtml = '<div class="options">';
                    q.options.forEach(opt => {
                        const selected = userAnswers[q.id]?.selected == opt.id;
                        const isAnswered = userAnswers[q.id];
                        const correct = opt.correct;
                        optionsHtml += `
                            <div class="option ${selected ? 'selected' : ''} ${isAnswered && correct ? 'correct' : ''} ${isAnswered && !correct && selected ? 'incorrect' : ''}"
                                 data-question="${q.id}" data-option="${opt.id}" data-correct="${opt.correct}"
                                 onclick="selectOption(this, ${q.id}, ${opt.id}, ${opt.correct})">
                                ${opt.text}
                            </div>
                        `;
                    });
                    optionsHtml += '</div>';
                    content += optionsHtml;
                } else if (q.type === "fill-in-blank") {
                    const value = userAnswers[q.id]?.answer || '';
                    content += `
                        <div class="fill-in-blank">
                            <input type="text" id="fill-${q.id}" value="${value}" placeholder="Ø£Ø¯Ø®Ù„ Ø¥Ø¬Ø§Ø¨ØªÙƒ Ù‡Ù†Ø§" oninput="onFillInput(${q.id})">
                        </div>
                    `;
                }

                content += `<div class="explanation" id="explanation-${q.id}" style="${userAnswers[q.id] ? 'display:block' : 'display:none'}">
                    <strong>Ø§Ù„ØªÙØ³ÙŠØ±:</strong> ${q.explanation}
                </div>`;
                questionEl.innerHTML = content;
                
                // ØªØ­Ø¯ÙŠØ¯ Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ Ù‚Ø¯ ØªÙ…Øª Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© Ø¹Ù„ÙŠÙ‡
                answered[index] = !!userAnswers[q.id];
            }

            container.appendChild(questionEl);
        });

        // ØªØ­Ø¯ÙŠØ« Ø²Ø± Ø§Ù„ØªØ§Ù„ÙŠ Ø¨Ù†Ø§Ø¡Ù‹ Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø§Ù„Ø­Ø§Ù„ÙŠ
        updateNextButton();

        // Ø±Ø¨Ø· Ø§Ù„Ø£Ø­Ø¯Ø§Ø«
        document.getElementById('next-btn').addEventListener('click', nextQuestion);
        document.getElementById('prev-btn').addEventListener('click', prevQuestion);
        document.getElementById('print-btn').addEventListener('click', printResults);
        document.getElementById('share-btn').addEventListener('click', shareResults);
        document.getElementById('restart-btn').addEventListener('click', restartExam);
        document.getElementById('back-btn').addEventListener('click', backToExams);

        if (wasResumed) {
            alert(`ØªÙ… Ø§Ø³ØªØ¦Ù†Ø§Ù Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ù…Ù† Ø§Ù„Ø³Ø¤Ø§Ù„ ${getQuestionNumber(currentQuestionIndex)}`);
        }
    }

    // Ø¨Ø¯Ø¡ Ø§Ù„Ø§Ù…ØªØ­Ø§Ù† Ø¹Ù†Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø©
    window.onload = initExam;
</script>
</body>
</html>